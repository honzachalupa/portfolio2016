function getData(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(window.data=JSON.parse(this.responseText),getData_Locally())},e.open("GET","http://www.honzachalupa.cz/dev/data/data.json",!0),e.send()}function getData_Locally(){var e=window.data;if(e.length>0){var t=shuffleArray(e),a=structureItems(t);renderItems(a),adjustCells()}else setTimeout(function(){getData_Locally()},200)}function structureItems(e){var t=[];for(var a in e){var i=e[a];"project"==i.Type?t.push({type:"item",tile:{type:i.Type,title:i.Title,image:i.ImageUrl1},link:"/pages/project.html?id="+i.Id}):"image"==i.Type?t.push({type:"item",tile:{type:i.Type,url:i.Url},link:"/pages/gallery.html?id="+i.Id}):"tweet"==i.Type&&t.push({type:"item",tile:{type:i.Type,text:i.Text},link:i.Url})}return t}function renderItems(e){var t="";for(var a in e){var i=e[a];if("items-group"==i.type){t+="<div class='items-group'>";for(var r in i.items){var n=i.items[r];t+=renderItemContent(n,2)}t+="</div>"}else{var n=i;t+=renderItemContent(n,1)}}document.querySelector(".render-target").innerHTML=t}function renderItemContent(e,t){console.log(e);var a=e.tile,i=e.tile.type,r="<a class='item level-"+t+" "+i+"' href='"+e.link+"'>";return"project"==i?r+="<div class='image-container' style='background-image: url("+a.image+")'></div><p class='title'>"+a.title+"</p>":"image"==i?r+="<div class='image-container' style='background-image: url("+a.url+")'></div>":"tweet"==i&&(r+="<p class='text'>"+e.text+"</p><div class='icon'></div>"),r+="</a>"}function rnd(){return Math.ceil(10*Math.random())}function adjustCells(){var e=4,t=$(window).height()/e,a=Math.floor(($(window).width()-$(".side").width())/t);$("div.items-group, a.item.level-1").css("flex-basis","calc(100% / "+a+")"),$(".item, .items-group").each(function(){$(this).height($(this).width())})}function shuffleArray(e){for(var t,a,i=e.length;0!==i;)a=Math.floor(Math.random()*i),i-=1,t=e[i],e[i]=e[a],e[a]=t;return e}getData(),window.onresize=function(){adjustCells()};