function getData(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(window.data=JSON.parse(this.responseText),getData_Locally())},e.open("GET","http://www.honzachalupa.cz/dev/data/data.json",!0),e.send()}function getData_Locally(){var e=window.data;if(e.length>0){var t=shuffleArray(e),a=structureItems(t);renderItems(a),adjustCells()}else setTimeout(function(){getData_Locally()},200)}function structureItems(e){var t=[];for(var a in e){var n=e[a];"project"==n.Type?t.push({type:"item",tile:{type:n.Type,title:n.Title,image:n.ImageUrl1},link:"pages/detail.html?type="+n.Type+"&id="+n.Id}):"image"==n.Type?t.push({type:"item",tile:{type:n.Type,url:n.Url},link:"pages/detail.html?type="+n.Type+"&id="+n.Id}):"tweet"==n.Type&&t.push({type:"item",tile:{type:n.Type,text:n.Text},link:n.Url})}return t}function renderItems(e){var t="";for(var a in e){var n=e[a];if("items-group"==n.type){t+="<div class='items-group'>";for(var i in n.items){var r=n.items[i];t+=renderItemContent(r,2)}t+="</div>"}else{var r=n;t+=renderItemContent(r,1)}}document.querySelector(".render-target").innerHTML=t}function renderItemContent(e,t){console.log(e);var a=e.tile,n=e.tile.type,i="<a class='item level-"+t+" "+n+"' href='"+e.link+"'>";return"project"==n?i+="<div class='image-container' style='background-image: url("+a.image+")'></div><p class='title'>"+a.title+"</p>":"image"==n?i+="<div class='image-container' style='background-image: url("+a.url+")'></div>":"tweet"==n&&(i+="<p class='text'>"+e.text+"</p><div class='icon'></div>"),i+="</a>"}function rnd(){return Math.ceil(10*Math.random())}function adjustCells(){var e=4,t=$(window).height()/e,a=Math.floor(($(window).width()-$(".side").width())/t);$("div.items-group, a.item.level-1").css("flex-basis","calc(100% / "+a+")"),$(".item, .items-group").each(function(){$(this).height($(this).width())})}function shuffleArray(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),n-=1,t=e[n],e[n]=e[a],e[a]=t;return e}function rndRange(e,t){return Math.floor(Math.random()*(t-e+1))+e}function toggleSidePanel(){var e=$(".side");0==e.hasClass("opened")?(e.addClass("opened"),e.removeClass("closed")):(e.addClass("closed"),e.removeClass("opened"))}getData(),$("h2 li").each(function(){$(this).css("border-color","rgb("+rndRange(0,255)+", "+rndRange(0,255)+", "+rndRange(0,255)+")")}),window.onresize=function(){adjustCells()};